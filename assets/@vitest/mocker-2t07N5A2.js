class he{registryByUrl=new Map;registryById=new Map;clear(){this.registryByUrl.clear(),this.registryById.clear()}keys(){return this.registryByUrl.keys()}add(e){this.registryByUrl.set(e.url,e),this.registryById.set(e.id,e)}register(e,t,r,o,c){const a=typeof e=="object"?e.type:e;if(typeof e=="object"){const i=e;if(i instanceof q||i instanceof C||i instanceof F||i instanceof O)throw new TypeError(`[vitest] Cannot register a mock that is already defined. Expected a JSON representation from \`MockedModule.toJSON\`, instead got "${i.type}". Use "registry.add()" to update a mock instead.`);if(i.type==="automock"){const l=q.fromJSON(i);return this.add(l),l}else if(i.type==="autospy"){const l=C.fromJSON(i);return this.add(l),l}else if(i.type==="redirect"){const l=O.fromJSON(i);return this.add(l),l}else throw i.type==="manual"?new Error("Cannot set serialized manual mock. Define a factory function manually with `ManualMockedModule.fromJSON()`."):new Error(`Unknown mock type: ${i.type}`)}if(typeof t!="string")throw new TypeError("[vitest] Mocks require a raw string.");if(typeof o!="string")throw new TypeError("[vitest] Mocks require a url string.");if(typeof r!="string")throw new TypeError("[vitest] Mocks require an id string.");if(a==="manual"){if(typeof c!="function")throw new TypeError("[vitest] Manual mocks require a factory function.");const i=new F(t,r,o,c);return this.add(i),i}else if(a==="automock"||a==="autospy"){const i=a==="automock"?new q(t,r,o):new C(t,r,o);return this.add(i),i}else if(a==="redirect"){if(typeof c!="string")throw new TypeError("[vitest] Redirect mocks require a redirect string.");const i=new O(t,r,o,c);return this.add(i),i}else throw new Error(`[vitest] Unknown mock type: ${a}`)}delete(e){this.registryByUrl.delete(e)}get(e){return this.registryByUrl.get(e)}getById(e){return this.registryById.get(e)}has(e){return this.registryByUrl.has(e)}}class q{type="automock";constructor(e,t,r){this.raw=e,this.id=t,this.url=r}static fromJSON(e){return new C(e.raw,e.id,e.url)}toJSON(){return{type:this.type,url:this.url,raw:this.raw,id:this.id}}}class C{type="autospy";constructor(e,t,r){this.raw=e,this.id=t,this.url=r}static fromJSON(e){return new C(e.raw,e.id,e.url)}toJSON(){return{type:this.type,url:this.url,id:this.id,raw:this.raw}}}class O{type="redirect";constructor(e,t,r,o){this.raw=e,this.id=t,this.url=r,this.redirect=o}static fromJSON(e){return new O(e.raw,e.id,e.url,e.redirect)}toJSON(){return{type:this.type,url:this.url,raw:this.raw,id:this.id,redirect:this.redirect}}}class F{cache;type="manual";constructor(e,t,r,o){this.raw=e,this.id=t,this.url=r,this.factory=o}async resolve(){if(this.cache)return this.cache;let e;try{e=await this.factory()}catch(t){const r=new Error('[vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock');throw r.cause=t,r}if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`[vitest] vi.mock("${this.raw}", factory?: () => unknown) is not returning an object. Did you mean to return an object with a "default" key?`);return this.cache=e}static fromJSON(e,t){return new F(e.raw,e.id,e.url,t)}toJSON(){return{type:this.type,url:this.url,id:this.id,raw:this.raw}}}function ye(n,e,t={}){const r=new Array,o=new me,c=(l,d,p)=>{try{return l[d]=p,!0}catch{return!1}},a=(l,d)=>{const p=D(l),m=p==="Module"||!!l.__esModule;for(const{key:w,descriptor:I}of Y(l,m,n.globalConstructors)){if(!m&&I.get){try{Object.defineProperty(d,w,I)}catch{}continue}if(ge(w,p))continue;const h=l[w],s=o.getId(h);if(s!==void 0){r.push(()=>c(d,w,o.getMockedValue(s)));continue}const u=D(h);if(Array.isArray(h)){c(d,w,[]);continue}const _=u.includes("Function")&&typeof h=="function";if((!_||h._isMockFunction)&&u!=="Object"&&u!=="Module"){c(d,w,h);continue}if(c(d,w,_?h:{})){if(_){let E=function(){if(this instanceof d[w])for(const{key:x,descriptor:M}of Y(this,!1,n.globalConstructors)){if(M.get)continue;const N=this[x];if(D(N).includes("Function")&&typeof N=="function"){const L=this[x],f=R(this,x).mockImplementation(L),$=f.mockReset;f.mockRestore=f.mockReset=()=>($.call(f),f.mockImplementation(L),f)}}};if(!n.spyOn)throw new Error("[@vitest/mocker] `spyOn` is not defined. This is a Vitest error. Please open a new issue with reproduction.");const R=n.spyOn,P=R(d,w);if(n.type==="automock"){P.mockImplementation(E);const x=P.mockReset;P.mockRestore=P.mockReset=()=>(x.call(P),P.mockImplementation(E),P)}Object.defineProperty(d[w],"length",{value:0})}o.track(h,d[w]),a(h,d[w])}}},i=t;a(e,i);for(const l of r)l();return i}class me{idMap=new Map;mockedValueMap=new Map;getId(e){return this.idMap.get(e)}getMockedValue(e){return this.mockedValueMap.get(e)}track(e,t){const r=this.idMap.size;return this.idMap.set(e,r),this.mockedValueMap.set(r,t),r}}function D(n){return Object.prototype.toString.apply(n).slice(8,-1)}function ge(n,e){return e.includes("Function")&&typeof n=="string"&&["arguments","callee","caller","length","name"].includes(n)}function Y(n,e,t){const{Map:r,Object:o,Function:c,RegExp:a,Array:i}=t,l=new r;let d=n;do{if(d===o.prototype||d===c.prototype||d===a.prototype)break;we(d,p=>{const m=o.getOwnPropertyDescriptor(d,p);m&&l.set(p,{key:p,descriptor:m})})}while(d=o.getPrototypeOf(d));if(e&&!l.has("default")&&"default"in n){const p=o.getOwnPropertyDescriptor(n,"default");p&&l.set("default",{key:"default",descriptor:p})}return i.from(l.values())}function we(n,e){const t=typeof e=="function"?e:r=>e.add(r);Object.getOwnPropertyNames(n).forEach(t),Object.getOwnPropertySymbols(n).forEach(t)}const ve="modulepreload",Se=function(n,e){return new URL(n,e).href},H={},ke=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){let d=function(p){return Promise.all(p.map(m=>Promise.resolve(m).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};const a=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=d(t.map(p=>{if(p=Se(p,r),p in H)return;H[p]=!0;const m=p.endsWith(".css"),w=m?'[rel="stylesheet"]':"";if(!!r)for(let s=a.length-1;s>=0;s--){const u=a[s];if(u.href===p&&(!m||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${p}"]${w}`))return;const h=document.createElement("link");if(h.rel=m?"stylesheet":ve,m||(h.as="script"),h.crossOrigin="",h.href=p,l&&h.setAttribute("nonce",l),document.head.appendChild(h),m)return new Promise((s,u)=>{h.addEventListener("load",s),h.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${p}`)))})}))}function c(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return o.then(a=>{for(const i of a||[])i.status==="rejected"&&c(i.reason);return e().catch(c)})},Ee=/^[A-Za-z]:\//;function se(n=""){return n&&n.replace(/\\/g,"/").replace(Ee,e=>e.toUpperCase())}const be=/^[/\\]{2}/,Ie=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,xe=/^[A-Za-z]:$/,_e=/.(\.[^./]+|\.)$/,Te=function(n){if(n.length===0)return".";n=se(n);const e=n.match(be),t=Z(n),r=n[n.length-1]==="/";return n=Pe(n,!t),n.length===0?t?"/":r?"./":".":(r&&(n+="/"),xe.test(n)&&(n+="/"),e?t?`//${n}`:`//./${n}`:t&&!Z(n)?`/${n}`:n)},$e=function(...n){let e="";for(const t of n)if(t)if(e.length>0){const r=e[e.length-1]==="/",o=t[0]==="/";r&&o?e+=t.slice(1):e+=r||o?t:`/${t}`}else e+=t;return Te(e)};function Pe(n,e){let t="",r=0,o=-1,c=0,a=null;for(let i=0;i<=n.length;++i){if(i<n.length)a=n[i];else{if(a==="/")break;a="/"}if(a==="/"){if(!(o===i-1||c===1))if(c===2){if(t.length<2||r!==2||t[t.length-1]!=="."||t[t.length-2]!=="."){if(t.length>2){const l=t.lastIndexOf("/");l===-1?(t="",r=0):(t=t.slice(0,l),r=t.length-1-t.lastIndexOf("/")),o=i,c=0;continue}else if(t.length>0){t="",r=0,o=i,c=0;continue}}e&&(t+=t.length>0?"/..":"..",r=2)}else t.length>0?t+=`/${n.slice(o+1,i)}`:t=n.slice(o+1,i),r=i-o-1;o=i,c=0}else a==="."&&c!==-1?++c:c=-1}return t}const Z=function(n){return Ie.test(n)},Re=function(n){if(n==="..")return"";const e=_e.exec(se(n));return e&&e[1]||""};var Me={reset:[0,0],bold:[1,22,"\x1B[22m\x1B[1m"],dim:[2,22,"\x1B[22m\x1B[2m"],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]},Ae=Object.entries(Me);function W(n){return String(n)}W.open="";W.close="";function Ce(n=!1){let e=typeof process<"u"?process:void 0,t=e?.env||{},r=e?.argv||[];return!("NO_COLOR"in t||r.includes("--no-color"))&&("FORCE_COLOR"in t||r.includes("--color")||e?.platform==="win32"||n&&t.TERM!=="dumb"||"CI"in t)||typeof window<"u"&&!!window.chrome}function Oe(n=!1){let e=Ce(n),t=(a,i,l,d)=>{let p="",m=0;do p+=a.substring(m,d)+l,m=d+i.length,d=a.indexOf(i,m);while(~d);return p+a.substring(m)},r=(a,i,l=a)=>{let d=p=>{let m=String(p),w=m.indexOf(i,a.length);return~w?a+t(m,i,l,w)+i:a+m+i};return d.open=a,d.close=i,d},o={isColorSupported:e},c=a=>`\x1B[${a}m`;for(let[a,i]of Ae)o[a]=e?r(c(i[0]),c(i[1]),i[2]):W;return o}Oe();function ce(n,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(r){if(r!=="default"&&!(r in n)){var o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return t[r]}})}})}),Object.freeze(n)}function ae(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var U={exports:{}},S={};/**
* @license React
* react-is.production.js
*
* Copyright (c) Meta Platforms, Inc. and affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var G;function Ne(){if(G)return S;G=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),a=Symbol.for("react.context"),i=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),w=Symbol.for("react.view_transition"),I=Symbol.for("react.client.reference");function h(s){if(typeof s=="object"&&s!==null){var u=s.$$typeof;switch(u){case n:switch(s=s.type,s){case t:case o:case r:case l:case d:case w:return s;default:switch(s=s&&s.$$typeof,s){case a:case i:case m:case p:return s;case c:return s;default:return u}}case e:return u}}}return S.ContextConsumer=c,S.ContextProvider=a,S.Element=n,S.ForwardRef=i,S.Fragment=t,S.Lazy=m,S.Memo=p,S.Portal=e,S.Profiler=o,S.StrictMode=r,S.Suspense=l,S.SuspenseList=d,S.isContextConsumer=function(s){return h(s)===c},S.isContextProvider=function(s){return h(s)===a},S.isElement=function(s){return typeof s=="object"&&s!==null&&s.$$typeof===n},S.isForwardRef=function(s){return h(s)===i},S.isFragment=function(s){return h(s)===t},S.isLazy=function(s){return h(s)===m},S.isMemo=function(s){return h(s)===p},S.isPortal=function(s){return h(s)===e},S.isProfiler=function(s){return h(s)===o},S.isStrictMode=function(s){return h(s)===r},S.isSuspense=function(s){return h(s)===l},S.isSuspenseList=function(s){return h(s)===d},S.isValidElementType=function(s){return typeof s=="string"||typeof s=="function"||s===t||s===o||s===r||s===l||s===d||typeof s=="object"&&s!==null&&(s.$$typeof===m||s.$$typeof===p||s.$$typeof===a||s.$$typeof===c||s.$$typeof===i||s.$$typeof===I||s.getModuleId!==void 0)},S.typeOf=h,S}var K;function Le(){return K||(K=1,U.exports=Ne()),U.exports}var le=Le(),Je=ae(le),Be=ce({__proto__:null,default:Je},[le]),z={exports:{}},v={};/**
* @license React
* react-is.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var Q;function Xe(){if(Q)return v;Q=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),a=Symbol.for("react.context"),i=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.offscreen"),h;h=Symbol.for("react.module.reference");function s(u){if(typeof u=="object"&&u!==null){var _=u.$$typeof;switch(_){case n:switch(u=u.type,u){case t:case o:case r:case d:case p:return u;default:switch(u=u&&u.$$typeof,u){case i:case a:case l:case w:case m:case c:return u;default:return _}}case e:return _}}}return v.ContextConsumer=a,v.ContextProvider=c,v.Element=n,v.ForwardRef=l,v.Fragment=t,v.Lazy=w,v.Memo=m,v.Portal=e,v.Profiler=o,v.StrictMode=r,v.Suspense=d,v.SuspenseList=p,v.isAsyncMode=function(){return!1},v.isConcurrentMode=function(){return!1},v.isContextConsumer=function(u){return s(u)===a},v.isContextProvider=function(u){return s(u)===c},v.isElement=function(u){return typeof u=="object"&&u!==null&&u.$$typeof===n},v.isForwardRef=function(u){return s(u)===l},v.isFragment=function(u){return s(u)===t},v.isLazy=function(u){return s(u)===w},v.isMemo=function(u){return s(u)===m},v.isPortal=function(u){return s(u)===e},v.isProfiler=function(u){return s(u)===o},v.isStrictMode=function(u){return s(u)===r},v.isSuspense=function(u){return s(u)===d},v.isSuspenseList=function(u){return s(u)===p},v.isValidElementType=function(u){return typeof u=="string"||typeof u=="function"||u===t||u===o||u===r||u===d||u===p||u===I||typeof u=="object"&&u!==null&&(u.$$typeof===w||u.$$typeof===m||u.$$typeof===c||u.$$typeof===a||u.$$typeof===l||u.$$typeof===h||u.getModuleId!==void 0)},v.typeOf=s,v}var ee;function qe(){return ee||(ee=1,z.exports=Xe()),z.exports}var ue=qe(),Fe=ae(ue),De=ce({__proto__:null,default:Fe},[ue]);const Ue=["isAsyncMode","isConcurrentMode","isContextConsumer","isContextProvider","isElement","isForwardRef","isFragment","isLazy","isMemo","isPortal","isProfiler","isStrictMode","isSuspense","isSuspenseList","isValidElementType"];Object.fromEntries(Ue.map(n=>[n,e=>De[n](e)||Be[n](e)]));let ze=()=>"Promise{…}";try{const{getPromiseDetails:n,kPending:e,kRejected:t}=process.binding("util");Array.isArray(n(Promise.resolve()))&&(ze=(r,o)=>{const[c,a]=n(r);return c===e?"Promise{<pending>}":`Promise${c===t?"!":""}{${o.inspect(a,o)}}`})}catch{}function je(n){const{message:e="$$stack trace error",stackTraceLimit:t=1}=n||{},r=Error.stackTraceLimit,o=Error.prepareStackTrace;Error.stackTraceLimit=t,Error.prepareStackTrace=i=>i.stack;const a=new Error(e).stack||"";return Error.prepareStackTrace=o,Error.stackTraceLimit=r,a}var j,te;function We(){if(te)return j;te=1;var n,e,t,r,o,c,a,i,l,d,p,m,w,I,h,s,u,_,R;return w=/\/(?![*\/])(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\\]).|\\.)*(\/[$_\u200C\u200D\p{ID_Continue}]*|\\)?/uy,m=/--|\+\+|=>|\.{3}|\??\.(?!\d)|(?:&&|\|\||\?\?|[+\-%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2}|\/(?![\/*]))=?|[?~,:;[\](){}]/y,n=/(\x23?)(?=[$_\p{ID_Start}\\])(?:[$_\u200C\u200D\p{ID_Continue}]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+/uy,h=/(['"])(?:(?!\1)[^\\\n\r]|\\(?:\r\n|[^]))*(\1)?/y,p=/(?:0[xX][\da-fA-F](?:_?[\da-fA-F])*|0[oO][0-7](?:_?[0-7])*|0[bB][01](?:_?[01])*)n?|0n|[1-9](?:_?\d)*n|(?:(?:0(?!\d)|0\d*[89]\d*|[1-9](?:_?\d)*)(?:\.(?:\d(?:_?\d)*)?)?|\.\d(?:_?\d)*)(?:[eE][+-]?\d(?:_?\d)*)?|0[0-7]+/y,s=/[`}](?:[^`\\$]|\\[^]|\$(?!\{))*(`|\$\{)?/y,R=/[\t\v\f\ufeff\p{Zs}]+/uy,i=/\r?\n|[\r\u2028\u2029]/y,l=/\/\*(?:[^*]|\*(?!\/))*(\*\/)?/y,I=/\/\/.*/y,t=/[<>.:={}]|\/(?![\/*])/y,e=/[$_\p{ID_Start}][$_\u200C\u200D\p{ID_Continue}-]*/uy,r=/(['"])(?:(?!\1)[^])*(\1)?/y,o=/[^<>{}]+/y,_=/^(?:[\/+-]|\.{3}|\?(?:InterpolationIn(?:JSX|Template)|NoLineTerminatorHere|NonExpressionParenEnd|UnaryIncDec))?$|[{}([,;<>=*%&|^!~?:]$/,u=/^(?:=>|[;\]){}]|else|\?(?:NoLineTerminatorHere|NonExpressionParenEnd))?$/,c=/^(?:await|case|default|delete|do|else|instanceof|new|return|throw|typeof|void|yield)$/,a=/^(?:return|throw|yield)$/,d=RegExp(i.source),j=function*(E,{jsx:P=!1}={}){var x,M,N,y,g,L,f,$,V,T,J,k,B,b;for({length:L}=E,y=0,g="",b=[{tag:"JS"}],x=[],J=0,k=!1;y<L;){switch($=b[b.length-1],$.tag){case"JS":case"JSNonExpressionParen":case"InterpolationInTemplate":case"InterpolationInJSX":if(E[y]==="/"&&(_.test(g)||c.test(g))&&(w.lastIndex=y,f=w.exec(E))){y=w.lastIndex,g=f[0],k=!0,yield{type:"RegularExpressionLiteral",value:f[0],closed:f[1]!==void 0&&f[1]!=="\\"};continue}if(m.lastIndex=y,f=m.exec(E)){switch(B=f[0],V=m.lastIndex,T=B,B){case"(":g==="?NonExpressionParenKeyword"&&b.push({tag:"JSNonExpressionParen",nesting:J}),J++,k=!1;break;case")":J--,k=!0,$.tag==="JSNonExpressionParen"&&J===$.nesting&&(b.pop(),T="?NonExpressionParenEnd",k=!1);break;case"{":m.lastIndex=0,N=!u.test(g)&&(_.test(g)||c.test(g)),x.push(N),k=!1;break;case"}":switch($.tag){case"InterpolationInTemplate":if(x.length===$.nesting){s.lastIndex=y,f=s.exec(E),y=s.lastIndex,g=f[0],f[1]==="${"?(g="?InterpolationInTemplate",k=!1,yield{type:"TemplateMiddle",value:f[0]}):(b.pop(),k=!0,yield{type:"TemplateTail",value:f[0],closed:f[1]==="`"});continue}break;case"InterpolationInJSX":if(x.length===$.nesting){b.pop(),y+=1,g="}",yield{type:"JSXPunctuator",value:"}"};continue}}k=x.pop(),T=k?"?ExpressionBraceEnd":"}";break;case"]":k=!0;break;case"++":case"--":T=k?"?PostfixIncDec":"?UnaryIncDec";break;case"<":if(P&&(_.test(g)||c.test(g))){b.push({tag:"JSXTag"}),y+=1,g="<",yield{type:"JSXPunctuator",value:B};continue}k=!1;break;default:k=!1}y=V,g=T,yield{type:"Punctuator",value:B};continue}if(n.lastIndex=y,f=n.exec(E)){switch(y=n.lastIndex,T=f[0],f[0]){case"for":case"if":case"while":case"with":g!=="."&&g!=="?."&&(T="?NonExpressionParenKeyword")}g=T,k=!c.test(f[0]),yield{type:f[1]==="#"?"PrivateIdentifier":"IdentifierName",value:f[0]};continue}if(h.lastIndex=y,f=h.exec(E)){y=h.lastIndex,g=f[0],k=!0,yield{type:"StringLiteral",value:f[0],closed:f[2]!==void 0};continue}if(p.lastIndex=y,f=p.exec(E)){y=p.lastIndex,g=f[0],k=!0,yield{type:"NumericLiteral",value:f[0]};continue}if(s.lastIndex=y,f=s.exec(E)){y=s.lastIndex,g=f[0],f[1]==="${"?(g="?InterpolationInTemplate",b.push({tag:"InterpolationInTemplate",nesting:x.length}),k=!1,yield{type:"TemplateHead",value:f[0]}):(k=!0,yield{type:"NoSubstitutionTemplate",value:f[0],closed:f[1]==="`"});continue}break;case"JSXTag":case"JSXTagEnd":if(t.lastIndex=y,f=t.exec(E)){switch(y=t.lastIndex,T=f[0],f[0]){case"<":b.push({tag:"JSXTag"});break;case">":b.pop(),g==="/"||$.tag==="JSXTagEnd"?(T="?JSX",k=!0):b.push({tag:"JSXChildren"});break;case"{":b.push({tag:"InterpolationInJSX",nesting:x.length}),T="?InterpolationInJSX",k=!1;break;case"/":g==="<"&&(b.pop(),b[b.length-1].tag==="JSXChildren"&&b.pop(),b.push({tag:"JSXTagEnd"}))}g=T,yield{type:"JSXPunctuator",value:f[0]};continue}if(e.lastIndex=y,f=e.exec(E)){y=e.lastIndex,g=f[0],yield{type:"JSXIdentifier",value:f[0]};continue}if(r.lastIndex=y,f=r.exec(E)){y=r.lastIndex,g=f[0],yield{type:"JSXString",value:f[0],closed:f[2]!==void 0};continue}break;case"JSXChildren":if(o.lastIndex=y,f=o.exec(E)){y=o.lastIndex,g=f[0],yield{type:"JSXText",value:f[0]};continue}switch(E[y]){case"<":b.push({tag:"JSXTag"}),y++,g="<",yield{type:"JSXPunctuator",value:"<"};continue;case"{":b.push({tag:"InterpolationInJSX",nesting:x.length}),y++,g="?InterpolationInJSX",k=!1,yield{type:"JSXPunctuator",value:"{"};continue}}if(R.lastIndex=y,f=R.exec(E)){y=R.lastIndex,yield{type:"WhiteSpace",value:f[0]};continue}if(i.lastIndex=y,f=i.exec(E)){y=i.lastIndex,k=!1,a.test(g)&&(g="?NoLineTerminatorHere"),yield{type:"LineTerminatorSequence",value:f[0]};continue}if(l.lastIndex=y,f=l.exec(E)){y=l.lastIndex,d.test(f[0])&&(k=!1,a.test(g)&&(g="?NoLineTerminatorHere")),yield{type:"MultiLineComment",value:f[0],closed:f[1]!==void 0};continue}if(I.lastIndex=y,f=I.exec(E)){y=I.lastIndex,k=!1,yield{type:"SingleLineComment",value:f[0]};continue}M=String.fromCodePoint(E.codePointAt(y)),y+=M.length,g=M,k=!1,yield{type:$.tag.startsWith("JSX")?"JSXInvalid":"Invalid",value:M}}},j}We();var fe={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"]};new Set(fe.keyword);new Set(fe.strict);const re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ve=new Uint8Array(64),Ye=new Uint8Array(128);for(let n=0;n<re.length;n++){const e=re.charCodeAt(n);Ve[n]=e,Ye[e]=n}var ne;(function(n){n[n.Empty=1]="Empty",n[n.Hash=2]="Hash",n[n.Query=3]="Query",n[n.RelativePath=4]="RelativePath",n[n.AbsolutePath=5]="AbsolutePath",n[n.SchemeRelative=6]="SchemeRelative",n[n.Absolute=7]="Absolute"})(ne||(ne={}));const He=/^[A-Za-z]:\//;function Ze(n=""){return n&&n.replace(/\\/g,"/").replace(He,e=>e.toUpperCase())}const Ge=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/;function Ke(){return typeof process<"u"&&typeof process.cwd=="function"?process.cwd().replace(/\\/g,"/"):"/"}const Qe=function(...n){n=n.map(r=>Ze(r));let e="",t=!1;for(let r=n.length-1;r>=-1&&!t;r--){const o=r>=0?n[r]:Ke();!o||o.length===0||(e=`${o}/${e}`,t=ie(o))}return e=et(e,!t),t&&!ie(e)?`/${e}`:e.length>0?e:"."};function et(n,e){let t="",r=0,o=-1,c=0,a=null;for(let i=0;i<=n.length;++i){if(i<n.length)a=n[i];else{if(a==="/")break;a="/"}if(a==="/"){if(!(o===i-1||c===1))if(c===2){if(t.length<2||r!==2||t[t.length-1]!=="."||t[t.length-2]!=="."){if(t.length>2){const l=t.lastIndexOf("/");l===-1?(t="",r=0):(t=t.slice(0,l),r=t.length-1-t.lastIndexOf("/")),o=i,c=0;continue}else if(t.length>0){t="",r=0,o=i,c=0;continue}}e&&(t+=t.length>0?"/..":"..",r=2)}else t.length>0?t+=`/${n.slice(o+1,i)}`:t=n.slice(o+1,i),r=i-o-1;o=i,c=0}else a==="."&&c!==-1?++c:c=-1}return t}const ie=function(n){return Ge.test(n)},de=/^\s*at .*(?:\S:\d+|\(native\))/m,tt=/^(?:eval@)?(?:\[native code\])?$/;function pe(n){if(!n.includes(":"))return[n];const t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(n.replace(/^\(|\)$/g,""));if(!t)return[n];let r=t[1];if(r.startsWith("async ")&&(r=r.slice(6)),r.startsWith("http:")||r.startsWith("https:")){const o=new URL(r);o.searchParams.delete("import"),o.searchParams.delete("browserv"),r=o.pathname+o.hash+o.search}if(r.startsWith("/@fs/")){const o=/^\/@fs\/[a-zA-Z]:\//.test(r);r=r.slice(o?5:4)}return[r,t[2]||void 0,t[3]||void 0]}function rt(n){let e=n.trim();if(tt.test(e)||(e.includes(" > eval")&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),!e.includes("@")&&!e.includes(":")))return null;const t=/((.*".+"[^@]*)?[^@]*)(@)/,r=e.match(t),o=r&&r[1]?r[1]:void 0,[c,a,i]=pe(e.replace(t,""));return!c||!a||!i?null:{file:c,method:o||"",line:Number.parseInt(a),column:Number.parseInt(i)}}function nt(n){const e=n.trim();return de.test(e)?it(e):rt(e)}function it(n){let e=n.trim();if(!de.test(e))return null;e.includes("(eval ")&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""));let t=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,"");const r=t.match(/ (\(.+\)$)/);t=r?t.replace(r[0],""):t;const[o,c,a]=pe(r?r[1]:t);let i=r&&t||"",l=o&&["eval","<anonymous>"].includes(o)?void 0:o;return!l||!c||!a?null:(i.startsWith("async ")&&(i=i.slice(6)),l.startsWith("file://")&&(l=l.slice(7)),l=l.startsWith("node:")||l.startsWith("internal:")?l:Qe(l),i&&(i=i.replace(/__vite_ssr_import_\d+__\./g,"")),{method:i,file:l,line:Number.parseInt(c),column:Number.parseInt(a)})}function st(n){const e=n?.globalThisKey||"__vitest_mocker__";function t(){return typeof globalThis[e]<"u"?globalThis[e]:new Proxy({},{get(r,o){throw new Error(`Vitest mocker was not initialized in this environment. vi.${String(o)}() is forbidden.`)}})}return{hoisted(r){if(typeof r!="function")throw new TypeError(`vi.hoisted() expects a function, but received a ${typeof r}`);return r()},mock(r,o){if(typeof r!="string")throw new TypeError(`vi.mock() expects a string path, but received a ${typeof r}`);const c=A("mock");t().queueMock(r,c,typeof o=="function"?()=>o(()=>t().importActual(r,c)):o)},unmock(r){if(typeof r!="string")throw new TypeError(`vi.unmock() expects a string path, but received a ${typeof r}`);t().queueUnmock(r,A("unmock"))},doMock(r,o){if(typeof r!="string")throw new TypeError(`vi.doMock() expects a string path, but received a ${typeof r}`);const c=A("doMock");t().queueMock(r,c,typeof o=="function"?()=>o(()=>t().importActual(r,c)):o)},doUnmock(r){if(typeof r!="string")throw new TypeError(`vi.doUnmock() expects a string path, but received a ${typeof r}`);t().queueUnmock(r,A("doUnmock"))},async importActual(r){return t().importActual(r,A("importActual"))},async importMock(r){return t().importMock(r,A("importMock"))}}}function A(n){const t=je({stackTraceLimit:5}).split(`
`),r=t.findIndex(c=>c.includes(` at Object.${n}`)||c.includes(`${n}@`)),o=nt(t[r+1]);return o?.file||""}const{now:oe}=Date;class ct{registry=new he;queue=new Set;mockedIds=new Set;constructor(e,t,r,o){this.interceptor=e,this.rpc=t,this.spyOn=r,this.config=o}async prepare(){this.queue.size&&await Promise.all([...this.queue.values()])}async resolveFactoryModule(e){const t=this.registry.get(e);if(!t||t.type!=="manual")throw new Error(`Mock ${e} wasn't registered. This is probably a Vitest error. Please, open a new issue with reproduction.`);return await t.resolve()}getFactoryModule(e){const t=this.registry.get(e);if(!t||t.type!=="manual")throw new Error(`Mock ${e} wasn't registered. This is probably a Vitest error. Please, open a new issue with reproduction.`);if(!t.cache)throw new Error(`Mock ${e} wasn't resolved. This is probably a Vitest error. Please, open a new issue with reproduction.`);return t.cache}async invalidate(){const e=Array.from(this.mockedIds);e.length&&(await this.rpc.invalidate(e),await this.interceptor.invalidate(),this.registry.clear())}async importActual(e,t){const r=await this.rpc.resolveId(e,t);if(r==null)throw new Error(`[vitest] Cannot resolve "${e}" imported from "${t}"`);const o=Re(r.id),c=new URL(r.url,location.href),a=`_vitest_original&ext${o}`,i=`${c.pathname}${c.search?`${c.search}&${a}`:`?${a}`}${c.hash}`;return this.wrapDynamicImport(()=>import(i)).then(l=>{if(!r.optimized||typeof l.default>"u")return l;const d=l.default;return d?.__esModule?d:{...typeof d=="object"&&!Array.isArray(d)||typeof d=="function"?d:{},default:d}})}async importMock(e,t){await this.prepare();const{resolvedId:r,resolvedUrl:o,redirectUrl:c}=await this.rpc.resolveMock(e,t,{mock:"auto"}),a=this.resolveMockPath(X(o));let i=this.registry.get(a);if(!i)if(c){const l=new URL(this.resolveMockPath(X(c)),location.href).toString();i=new O(e,r,a,l)}else i=new q(e,r,a);if(i.type==="manual")return await i.resolve();if(i.type==="automock"||i.type==="autospy"){const l=new URL(`/@id/${r}`,location.href),d=l.search?`${l.search}&t=${oe()}`:`?t=${oe()}`,p=await ke(()=>import(`${l.pathname}${d}&mock=${i.type}${l.hash}`),[],import.meta.url);return this.mockObject(p,i.type)}return import(i.redirect)}mockObject(e,t="automock"){return ye({globalConstructors:{Object,Function,Array,Map,RegExp},spyOn:this.spyOn,type:t},e)}queueMock(e,t,r){const o=this.rpc.resolveMock(e,t,{mock:typeof r=="function"?"factory":r?.spy?"spy":"auto"}).then(async({redirectUrl:c,resolvedId:a,resolvedUrl:i,needsInterop:l,mockType:d})=>{const p=this.resolveMockPath(X(i));this.mockedIds.add(a);const m=typeof r=="function"?async()=>{const h=await r();return l?{default:h}:h}:void 0,w=typeof c=="string"?new URL(this.resolveMockPath(X(c)),location.href).toString():null;let I;d==="manual"?I=this.registry.register("manual",e,a,p,m):d==="autospy"?I=this.registry.register("autospy",e,a,p):d==="redirect"?I=this.registry.register("redirect",e,a,p,w):I=this.registry.register("automock",e,a,p),await this.interceptor.register(I)}).finally(()=>{this.queue.delete(o)});this.queue.add(o)}queueUnmock(e,t){const r=this.rpc.resolveId(e,t).then(async o=>{if(!o)return;const c=this.resolveMockPath(X(o.url));this.mockedIds.add(o.id),this.registry.delete(c),await this.interceptor.delete(c)}).finally(()=>{this.queue.delete(r)});this.queue.add(r)}wrapDynamicImport(e){return typeof e=="function"?new Promise((r,o)=>{this.prepare().finally(()=>{e().then(r,o)})}):e}resolveMockPath(e){const t=this.config,r=$e("/@fs/",t.root);return e.startsWith(t.root)?e.slice(t.root.length):e.startsWith(r)?e.slice(r.length):e}}const ot=/(\?|&)v=\w{8}/;function X(n){return n.replace(ot,"")}export{ct as M,ke as _,he as a,st as c};
